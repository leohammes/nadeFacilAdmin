<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<h:head>
		<title>Nade Fácil Admin</title>
     	<meta name="viewport" content="width=480, initial-scale=1.0"></meta>
    	<link rel="stylesheet" type="text/css" href="/css/3rd/angular-material.min.css"></link>
     	<link rel="stylesheet" type="text/css" href="/css/3rd/bootstrap-3.0.3.min.css"></link>
     	<link rel="stylesheet" type="text/css" href="./../css/insert.css"></link>
		<script src="/js/3rd/angular.min.js"></script>
		<script src="/js/3rd/angular-animate.min.js"></script>
		<script src="/js/3rd/angular-aria.min.js"></script>
		<script src="/js/3rd/angular-messages.min.js"></script>
		<script src="/js/3rd/ui-bootstrap.tpl.min.js"></script>
		<script src="/js/3rd/angular-material.min.js"></script>
		<script src="./../js/main.js"></script>
	</h:head>
	
	<body ng-app="NadeFacilAdminApp" ng-controller="AdminCtrl">
		<h:panelGroup>
			<div class="big-title border-bottom">
				<h1>Card da página #{mainController.getPageDescription(mainController.currentPage)}</h1>
			</div>
			<p:growl id="mensagens" autoUpdate="true" />
			<h:form styleClass="flex-box" enctype="multipart/form-data">
				<div class="insert-form-area">
					<p:layoutUnit styleClass="form-item" position="center">
						<h4 style="margin-left: 10px;">Escolha da imagem:</h4>
						<div class="form-item gallery-content">
							<p:galleria value="#{saveHintController.images}" panelWidth="400" panelHeight="200" var="name" styleClass="gallery-cards" autoPlay="false" showCaption="false">
						    	<p:commandButton value="Selecionar #{name}" update="@form" actionListener="#{saveHintController.setImageName}" styleClass="ui-priority-primary default-button select-image">
						    		<f:param name="name" value="#{name}" id="name"></f:param>
						    	</p:commandButton>
						    	<h:graphicImage value="/images/?file=#{name}" title="#{name}"/>
							</p:galleria>
						</div>
						
						<div class="flex-box">
							<p:fileUpload fileUploadListener="#{saveHintController.upload}"
								fileLimitMessage="Excedido Limite de imagens"
								cancelLabel="Cancelar" label="Escolher nova imagem"
								uploadLabel="Enviar"
								update="card-image"
								invalidFileMessage="Somente arquivos .jpg ou .png"
								allowTypes="/(\.|\/)(jpe?g|png)$/"
								styleClass="form-item upload-image"
								value="#{saveHintController.file}">
							</p:fileUpload>
						</div>
					</p:layoutUnit>
					<div class="form-item">
						<h4>Título da Dica:</h4>
						<p:inputText styleClass="form-item" maxlength="40" value="#{saveHintController.currentHint.title}"></p:inputText>
					</div>
					<div class="form-item">
						<h4>Descrição curta da Dica:</h4>
						<p:inputTextarea styleClass="form-item" autoResize="false" rows="5" value="#{saveHintController.currentHint.shortDescription}"></p:inputTextarea>
					</div>
					<div class="form-item">
						<h4>Descrição da Dica:</h4>
						<p:inputTextarea styleClass="form-item" autoResize="false" rows="10" value="#{saveHintController.currentHint.description}"></p:inputTextarea>
					</div>
				</div>
				<div class="middle-section-area flex-box">
					<p:commandButton value="Preview" id="preview" update="@form" styleClass="ui-priority-primary default-button" />
					<p:commandButton value="Salvar" id="save" styleClass="ui-priority-primary default-button btn-save" action="#{saveHintController.save}" />
				</div>
				<div class="card-preview-area">
					<md-card class="index-card">
					  <h:graphicImage id="card-image" value="/images/?file=#{saveHintController.currentHint.image.name}" class="md-card-image" alt="Nade Fácil"></h:graphicImage>
					  <md-card-title>
					    <md-card-title-text>
					      <span class="md-headline">#{saveHintController.currentHint.title}</span>
					    </md-card-title-text>
					  </md-card-title>
					  <md-card-content>
					    <div class="with-fade">
					      #{saveHintController.currentHint.shortDescription}
					    </div>
					  </md-card-content>
					  <md-card-actions layout="row" layout-align="end center" class="layout-align-end-center layout-row">
				 	   <h:commandButton class="md-button md-ink-ripple" value="..."/>
					  </md-card-actions>
					</md-card>
				</div>
			</h:form>
		</h:panelGroup>
	</body>
</html>